window.products = {
    homeDecor: [
        { 
            id: 1,
            name: 'Artisan Ceramic Vase',
            price: 68.00,
            img: 'Home Decor/Artisan Ceramic Vase.png',
            category: 'homeDecor',
            details: {
                Material: 'Stoneware Clay',
                Dimensions: '12" Height',
                Features: 'Hand-glazed Finish'
            }
        },
        { 
            id: 2,
            name: 'Macramé Wall Hanging',
            price: 85.00,
            img: 'Home Decor/Macramé Wall Hanging.png',
            category: 'homeDecor',
            details: {
                Material: 'Organic Cotton Cord',
                Dimensions: '24" Diameter',
                Features: 'Bohemian Design'
            }
        },
        { 
            id: 3,
            name: 'Geometric Cement Planter',
            price: 45.00,
            img: 'Home Decor/Geometric Cement Planter.png',
            category: 'homeDecor',
            details: {
                Material: 'Concrete Mix',
                Dimensions: '8" Diameter',
                Features: 'Drainage Hole Included'
            }
        },
        { 
            id: 4,
            name: 'Handwoven Jute Rug',
            price: 120.00,
            img: 'Home Decor/Handwoven Jute Rug.png',
            category: 'homeDecor',
            details: {
                Material: 'Natural Jute',
                Dimensions: '5x8 Feet',
                Features: 'Non-slip Backing'
            }
        },
        { 
            id: 5,
            name: 'Brass Table Lamp',
            price: 89.00,
            img: 'Home Decor/Brass Table Lamp.png',
            category: 'homeDecor',
            details: {
                Material: 'Polished Brass',
                Dimensions: '18" Height',
                Features: 'Adjustable Brightness'
            }
        }
    ],

    artCollectibles: [
        { 
            id: 6,
            name: 'Oil Landscape Painting',
            price: 350.00,
            img: 'artCollectibles/Oil Landscape Painting.png',
            category: 'artCollectibles',
            details: {
                Material: 'Oil on Canvas',
                Dimensions: '24" x 36"',
                Features: 'Signed by Artist'
            }
        },
        { 
            id: 7,
            name: 'Bronze Sculpture',
            price: 220.00,
            img: 'artCollectibles/Bronze Sculpture.png',
            category: 'artCollectibles',
            details: {
                Material: 'Lost-wax Bronze',
                Dimensions: '12" Height',
                Features: 'Limited Edition'
            }
        },
        { 
            id: 8,
            name: 'Silk Screen Print',
            price: 75.00,
            img: 'artCollectibles/Silk Screen Print.png',
            category: 'artCollectibles',
            details: {
                Material: 'Archival Paper',
                Dimensions: '18" x 24"',
                Features: 'Numbered Series'
            }
        },
        { 
            id: 9,
            name: 'Ceramic Art Bowl',
            price: 65.00,
            img: 'artCollectibles/Ceramic Art Bowl.png',
            category: 'artCollectibles',
            details: {
                Material: 'Porcelain',
                Dimensions: '9" Diameter',
                Features: 'Gold Leaf Accents'
            }
        },
        { 
            id: 10,
            name: 'Wood Carving Panel',
            price: 95.00,
            img: 'artCollectibles/Wood Carving Panel.png',
            category: 'artCollectibles',
            details: {
                Material: 'Teak Wood',
                Dimensions: '16" x 20"',
                Features: 'Traditional Motif'
            }
        }
    ],

    accessories: [
        { 
            id: 11,
            name: 'Silver Filigree Earrings',
            price: 65.00,
            img: 'accessories/Silver Filigree Earrings.jpg',
            category: 'accessories',
            details: {
                Material: '925 Sterling Silver',
                Dimensions: '2.5" Length',
                Features: 'French Hook Closure'
            }
        },
        { 
            id: 12,
            name: 'Tooled Leather Bag',
            price: 150.00,
            img: 'accessories/Tooled Leather Bag.jpg',
            category: 'accessories',
            details: {
                Material: 'Full-grain Leather',
                Dimensions: '12" x 8"',
                Features: 'Brass Hardware'
            }
        },
        { 
            id: 13,
            name: 'Beaded Silk Scarf',
            price: 45.00,
            img: 'accessories/Beaded Silk Scarf.jpg',
            category: 'accessories',
            details: {
                Material: 'Mulberry Silk',
                Dimensions: '35" Square',
                Features: 'Hand-rolled Edges'
            }
        },
        { 
            id: 14,
            name: 'Hammered Cuff Bracelet',
            price: 55.00,
            img: 'accessories/Hammered Cuff Bracelet.jpg',
            category: 'accessories',
            details: {
                Material: 'Copper Alloy',
                Dimensions: '7" Circumference',
                Features: 'Adjustable Fit'
            }
        },
        { 
            id: 15,
            name: 'Enamel Pendant Necklace',
            price: 38.00,
            img: 'accessories/Enamel Pendant Necklace.jpg',
            category: 'accessories',
            details: {
                Material: 'Sterling Silver',
                Dimensions: '1.5" Pendant',
                Features: '18" Chain Length'
            }
        }
    ],

    paperGoods: [
        { 
            id: 16,
            name: 'Letterpress Stationery Set',
            price: 45.00,
            img: 'Paper Goods/Letterpress Stationery Set.jpg',
            category: 'paperGoods',
            details: {
                Material: 'Cotton Paper',
                Dimensions: 'A6 Size',
                Features: 'Foiled Accents'
            }
        },
        { 
            id: 17,
            name: 'Watercolor Art Prints',
            price: 28.00,
            img: 'Paper Goods/Watercolor Art Prints.jpg',
            category: 'paperGoods',
            details: {
                Material: 'Archival Matte',
                Dimensions: '11" x 14"',
                Features: 'Botanical Series'
            }
        },
        { 
            id: 18,
            name: 'Leather-bound Journal',
            price: 32.00,
            img: 'Paper Goods/Leather-bound Journal.jpg',
            category: 'paperGoods',
            details: {
                Material: 'Vegetable-tanned Leather',
                Dimensions: '5" x 7"',
                Features: 'Lined Pages'
            }
        },
        { 
            id: 19,
            name: 'Screen Printed Posters',
            price: 22.00,
            img: 'Paper Goods/Screen Printed Posters.jpg',
            category: 'paperGoods',
            details: {
                Material: 'Recycled Paper',
                Dimensions: '18" x 24"',
                Features: 'Vintage Designs'
            }
        },
        { 
            id: 20,
            name: 'Embossed Notebook Set',
            price: 18.00,
            img: 'Paper Goods/Embossed Notebook Set.jpg',
            category: 'paperGoods',
            details: {
                Material: 'Kraft Paper',
                Dimensions: '3.5" x 5"',
                Features: '3-Pack Bundle'
            }
        }
    ],

    toys: [
        { 
            id: 21,
            name: 'Wooden Montessori Clock',
            price: 38.00,
            img: 'Handcrafted Toys/Wooden Montessori Clock.jpg',
            category: 'toys',
            details: {
                Material: 'Beechwood',
                Dimensions: '10" Diameter',
                Features: 'Shape Sorting'
            }
        },
        { 
            id: 22,
            name: 'Handmade Rag Doll',
            price: 45.00,
            img: 'Handcrafted Toys/Handmade Rag Doll.jpg',
            category: 'toys',
            details: {
                Material: 'Organic Cotton',
                Dimensions: '15" Height',
                Features: 'Machine Washable'
            }
        },
        { 
            id: 23,
            name: 'Building Block Set',
            price: 55.00,
            img: 'Handcrafted Toys/Building Block Set.jpg',
            category: 'toys',
            details: {
                Material: 'Maple Wood',
                Dimensions: '50 Piece Set',
                Features: 'Non-toxic Paint'
            }
        },
        { 
            id: 24,
            name: 'Felt Puzzle Mat',
            price: 32.00,
            img: 'Handcrafted Toys/Felt Puzzle Mat.jpg',
            category: 'toys',
            details: {
                Material: 'Wool Felt',
                Dimensions: '24" x 36"',
                Features: 'Alphabet Designs'
            }
        },
        { 
            id: 25,
            name: 'Knitted Animal Set',
            price: 28.00,
            img: 'Handcrafted Toys/Knitted Animal Set.jpg',
            category: 'toys',
            details: {
                Material: 'Merino Wool',
                Dimensions: '6-8" Tall',
                Features: '5 Piece Collection'
            }
        }
    ],

    fiberCrafts: [
        { 
            id: 26,
            name: 'Merino Wool Bundle',
            price: 25.00,
            img: 'Fiber Crafts/Merino Wool Bundle.jpg',
            category: 'fiberCrafts',
            details: {
                Material: '100% Merino',
                Dimensions: '100g Skeins',
                Features: '3 Color Pack'
            }
        },
        { 
            id: 27,
            name: 'Embroidery Starter Kit',
            price: 35.00,
            img: 'Fiber Crafts/Embroidery Starter Kit.jpg',
            category: 'fiberCrafts',
            details: {
                Material: 'Cotton Thread',
                Dimensions: '8" Hoop',
                Features: '50 Color Set'
            }
        },
        { 
            id: 28,
            name: 'Loom Weaving Set',
            price: 75.00,
            img: 'Fiber Crafts/Loom Weaving Set.jpg',
            category: 'fiberCrafts',
            details: {
                Material: 'Pine Wood',
                Dimensions: '12" Loom',
                Features: 'Beginner Guide'
            }
        },
        { 
            id: 29,
            name: 'Knitting Needle Set',
            price: 45.00,
            img: 'Fiber Crafts/Knitting Needle Set.jpg',
            category: 'fiberCrafts',
            details: {
                Material: 'Bamboo',
                Dimensions: '10" Length',
                Features: '5 Size Pack'
            }
        },
        { 
            id: 30,
            name: 'Crochet Pattern Book',
            price: 18.00,
            img: 'Fiber Crafts/Crochet Pattern Book.jpg',
            category: 'fiberCrafts',
            details: {
                Material: 'Recycled Paper',
                Dimensions: '8.5" x 11"',
                Features: '25 Projects'
            }
        }
    ]
};

window.cart = [];

// Function to render products for new categories
function renderProducts() {
    const categories = {
        homeDecor: document.getElementById('home-decor').querySelector('.items'),
        artCollectibles: document.getElementById('art-collectibles').querySelector('.items'),
        accessories: document.getElementById('accessories').querySelector('.items'),
        paperGoods: document.getElementById('paper-goods').querySelector('.items'),
        toys: document.getElementById('toys').querySelector('.items'),
        fiberCrafts: document.getElementById('fiber-crafts').querySelector('.items')
    };

    // Render products for each category
    Object.entries(products).forEach(([categoryName, categoryProducts]) => {
        const container = categories[categoryName];
        categoryProducts.forEach(product => {
            const productElement = document.createElement('div');
            productElement.className = 'item';
            productElement.dataset.category = categoryName;
            productElement.dataset.id = product.id;
            productElement.innerHTML = `
                <img src="${product.img}" alt="${product.name}">
                <div class="info">
                    <h3>${product.name}</h3>
                    <p>Price: $${product.price}</p>
                    <div class="product-controls">
                        <div class="quantity-selector">
                            <label>Qty:</label>
                            <input type="number" class="quantity-input" min="1" value="1">
                        </div>
                        <div class="product-buttons">
                            <button onclick="addToCart('${categoryName}', ${product.id})">Add to Cart</button>
                            <button onclick="buyNow('${categoryName}', ${product.id})">Buy Now</button>
                        </div>
                    </div>
                </div>
            `;
            container.appendChild(productElement);
        });
    });
}



// Fixed addToCart function with quantity handling
function addToCart(category, productId) {
    const itemElement = document.querySelector(`[data-category="${category}"][data-id="${productId}"]`);
    const quantityInput = itemElement.querySelector('.quantity-input');
    const quantity = parseInt(quantityInput.value) || 1;
    
    const product = products[category].find(item => item.id === productId);
    
    if (product) {
        const existingItem = cart.find(item => 
            item.id === productId && item.category === category
        );
        
        if (existingItem) {
            existingItem.quantity += quantity;
        } else {
            cart.push({
                ...product,
                quantity: quantity
            });
        }
        
        updateCart();
        showNotification(`${quantity} ${product.name} added to cart!`);
        quantityInput.value = 1; // Reset quantity input
    }
}

// Fixed buyNow function
function buyNow(category, productId) {
    addToCart(category, productId);
    window.location.href = 'electronicpayment.html';
}

// Cart management functions
function updateCart() {
    const cartContainer = document.getElementById('cart-items');
    const totalPriceElement = document.getElementById('total-price');
    
    cartContainer.innerHTML = '';
    
    cart.forEach((item, index) => {
        const cartItem = document.createElement('div');
        cartItem.className = 'cart-item';
        cartItem.innerHTML = `
            <p>${item.name} (Qty: ${item.quantity}) - $${(item.price * item.quantity).toFixed(2)}</p>
            <button onclick="removeFromCart(${index})">Remove</button>
        `;
        cartContainer.appendChild(cartItem);
    });

    const totalPrice = cart.reduce((total, item) => total + (item.price * item.quantity), 0);
    totalPriceElement.textContent = totalPrice.toFixed(2);
}

function removeFromCart(index) {
    cart.splice(index, 1);
    updateCart();
}

function clearCart() {
    cart = [];
    updateCart();
}

function proceedToPayment() {
    if (cart.length === 0) {
        showNotification('Your cart is empty!');
        return;
    }
    window.location.href = 'electronicpayment.html';
}

// Notification system
function showNotification(message) {
    const notification = document.createElement('div');
    notification.className = 'cart-notification';
    notification.textContent = message;
    document.body.appendChild(notification);
    setTimeout(() => notification.remove(), 2000);
}

// Initialize the store
document.addEventListener('DOMContentLoaded', renderProducts);
